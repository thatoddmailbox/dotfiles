shopt -s nocaseglob

alias l='ls'

alias d='doc'
alias desk='des'
alias dl='dow'
alias down='dow'
alias downl='dow'
alias m='mkdir -p'
alias mk='mkdir -p'
alias sch='school'

alias pud='pushd'
alias pod='popd'

c() {
	if [[ -e $1 ]]; then
		cd $1
	elif [[ $1 ]]; then
		cd *$1*/
	fi
}
e() {
	if [[ $1 ]]; then
		echo *$1*
	fi
}
mkc() {
	mkdir -p $1
	cd $1
}
xo() {
	if [[ $1 ]]; then
		xdg-open "$1"
	else
		xdg-open .
	fi
}

# Directory aliases mapping
declare -A _dir_aliases=(
	[des]=~/Desktop
	[doc]=~/Documents
	[dow]=~/Downloads
	[school]=~/Documents/School/2024FA
	[ims]=~/Documents/School/2024FA/21M.385
	[res]=~/Documents/School/Research
	[pb]=~/Documents/PromptBit
	[nts]=~/Documents/PromptBit/NoteToScreen
	[gh]=~/Documents/GitHub
	[gos]=~/go/src/github.com
	[gost]=~/go/src/github.com/thatoddmailbox
	[gosm]=~/go/src/github.com/MyHomeworkSpace
	[gosn]=~/go/src/github.com/NoteToScreen
	[gosp]=~/go/src/github.com/PromptBit
	[work]=~/work
	[cwd]=~/work/claudewd
)

# Generic completion function for directory aliases
_comp_dir_alias() {
	local cmd="$3"
	local dir="${_dir_aliases[$cmd]}"
	[[ -z "$dir" ]] && return 0
	COMPREPLY=($(compgen -d "$dir/$2"))
	COMPREPLY=("${COMPREPLY[@]##*/}")
}

# Generate functions and set up completion for each directory alias
for _name in "${!_dir_aliases[@]}"; do
	_dir="${_dir_aliases[$_name]}"
	eval "$_name() { cd $_dir; c \$1; }"
	complete -F _comp_dir_alias "$_name"
done
unset _name _dir
